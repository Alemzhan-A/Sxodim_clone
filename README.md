# Sxodim Clone

Sxodim Clone - приложение для управления мероприятиями, которое позволяет пользователям просматривать предстоящие события в вашем городе, регистрироваться на них и управлять своими бронированиями. Приложение интегрировано с Google API для автоматического добавления мероприятий в ваш календарь, чтобы вы не забыли о них.

## Сделано с помощью

- PHP версии 8.2
- Google API
- HTML, CSS, JS
- JSON файл для событий

## Демо

- [Фотографии](https://github.com/Alemzhan-A/Sxodim_clone/tree/main/Images)
- [Видео авторизации через Google и полного функционала](https://youtu.be/ZvFOIZh5wq8)

## Инструкция по запуску

1. **Запустите XAMPP**  
   Скачайте XAMPP по [данной ссылке](https://www.apachefriends.org/ru/index.html).

2. **Включите Apache и MySQL**  
   Нажмите кнопку "Start" в столбце "Actions".

3. **Перейдите на сайт phpMyAdmin**  
   Откройте [http://localhost/phpmyadmin/](http://localhost/phpmyadmin/).

4. **Создайте базу данных**  
   Создайте БД с именем `events`.

5. **Создайте таблицы в базе данных**  
   Выполните следующие SQL-запросы для созданной БД `events`:
   ```sql
   CREATE TABLE bookings (
       id INT AUTO_INCREMENT PRIMARY KEY,
       username VARCHAR(255) NOT NULL,
       event_id INT NOT NULL,
       quantity INT NOT NULL
   );

   CREATE TABLE users (
       id INT AUTO_INCREMENT PRIMARY KEY,
       username VARCHAR(255) NOT NULL UNIQUE,
       password VARCHAR(255) NOT NULL
   );
   ```

6. **Скачайте папку Events**  
   Переместите папку `Events` из [моего репозитория](https://github.com/Alemzhan-A/Sxodim_clone) в папку `xampp/htdocs`.

7. **Запустите приложение**  
   Введите в поисковую строку `localhost/events/index.php`.

8. **Готово!**  

## Ключевые элементы разработки

В качестве примера я взял стилистику сайта Sxodim. Я зафетчил данные о мероприятиях с их сайта и сохранил их в JSON файл `data/events.json`. Затем использовал эти данные для загрузки информации на главной странице. 

Для хранения данных я создал две таблицы в базе данных: для пользователей и их бронирований. В `profile.php` я создал таблицу с мероприятиями, отображающую только те мероприятия, которые забронировал пользователь через SQL-запросы.

На странице `login.php` использованы модальные окна для вывода ошибок. Например, если пользователь вводит неправильный пароль, то выводится соответствующее сообщение об ошибке, что позволяет пользователю понять, что именно от него требуется для входа. 

Для хэширования паролей в `register.php` я использовал встроенную функцию `password_hash`. Это обеспечивает конфиденциальность важной информации. Пример такого хэширования: `$2y$10$Y4.Oq8dRLYgCWBa3up.PO.fIRxHw5U4POngSiy3hHgJ...`. Таким образом, даже владелец базы данных не имеет легкой возможности просматривать пароли пользователей.

Одним из самых важных этапов разработки было использование Google Calendar API. Пользователь может автоматически добавлять мероприятие в свой календарь, включая всю важную информацию (адрес, краткое описание мероприятия). Для этого я использовал Composer для подключения сторонних библиотек для работы с API Google. На сайте [Google Cloud Console](https://console.cloud.google.com) я создал проект Events Alemzhan, настроил приложение и получил доступ к OAuth 2.0 Client ID. 

OAuth 2.0 Client ID дает доступ к взаимодействию с Google аккаунтом пользователя. В моем приложении данный ID предоставлял возможность пользователям заходить в свой Google аккаунт и автоматически добавлять мероприятия в свой календарь. Для более подробной информации вы можете просмотреть файлы `oauth2callback.php`, `config.php`, `profile.php`.

## Известные недочеты

- Длительность мероприятий на сайте Sxodim не указана, поэтому я сделал так, что каждое мероприятие добавляется в календарь с длительностью 1 час.
- Если выполнен вход в один Google аккаунт, то нельзя зайти в другой, так как создается уникальный `token.json`.
